From a100afd5714845b845b94183382c6836962b4784 Mon Sep 17 00:00:00 2001
From: Jason Rogena <j.rogena@cgiar.org>
Date: Thu, 29 May 2014 18:07:41 +0300
Subject: [PATCH 179/213] Version 0.9.8.2: Default date in AddEventActivity

The default date in AddEventActivity is now a blank event
---
 MistroFarmer/src/main/AndroidManifest.xml                        | 4 ++--
 .../main/java/org/cgiar/ilri/mistro/farmer/AddEventActivity.java | 9 +++++++--
 MistroFarmer/src/main/res/values/strings_en.xml                  | 2 ++
 MistroFarmer/src/main/res/values/strings_kl.xml                  | 1 +
 MistroFarmer/src/main/res/values/strings_kr.xml                  | 1 +
 MistroFarmer/src/main/res/values/strings_lh.xml                  | 1 +
 MistroFarmer/src/main/res/values/strings_sw.xml                  | 1 +
 7 files changed, 15 insertions(+), 4 deletions(-)

diff --git a/MistroFarmer/src/main/AndroidManifest.xml b/MistroFarmer/src/main/AndroidManifest.xml
index 18fbbcb..77bda99 100644
--- a/MistroFarmer/src/main/AndroidManifest.xml
+++ b/MistroFarmer/src/main/AndroidManifest.xml
@@ -1,8 +1,8 @@
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="org.cgiar.ilri.mistro.farmer"
-    android:versionCode="8"
-    android:versionName="0.9.8.1" >
+    android:versionCode="9"
+    android:versionName="0.9.8.2" >
 
     <uses-sdk
         android:minSdkVersion="7"
diff --git a/MistroFarmer/src/main/java/org/cgiar/ilri/mistro/farmer/AddEventActivity.java b/MistroFarmer/src/main/java/org/cgiar/ilri/mistro/farmer/AddEventActivity.java
index 95f73f0..37ce870 100644
--- a/MistroFarmer/src/main/java/org/cgiar/ilri/mistro/farmer/AddEventActivity.java
+++ b/MistroFarmer/src/main/java/org/cgiar/ilri/mistro/farmer/AddEventActivity.java
@@ -572,6 +572,9 @@ public class AddEventActivity extends SherlockActivity implements MistroActivity
 
     private boolean validateInput()
     {
+
+        String[] eventTypesInEN = Locale.getArrayInLocale("cow_event_types",this, Locale.LOCALE_ENGLISH);
+        String selectedEvent = eventTypesInEN[eventTypeS.getSelectedItemPosition()];
         if(dateET.getText().toString()==null||dateET.getText().toString().length()==0) {
             Toast.makeText(this,enterDate,Toast.LENGTH_LONG).show();
             return false;
@@ -581,8 +584,10 @@ public class AddEventActivity extends SherlockActivity implements MistroActivity
                 return false;
             }
         }
-        String[] eventTypesInEN = Locale.getArrayInLocale("cow_event_types",this, Locale.LOCALE_ENGLISH);
-        String selectedEvent = eventTypesInEN[eventTypeS.getSelectedItemPosition()];
+        if(selectedEvent.length() == 0){
+            Toast.makeText(this,Locale.getStringInLocale("select_an_event",this),Toast.LENGTH_LONG).show();
+            return false;
+        }
         if(selectedEvent.equals("Abortion") || selectedEvent.equals("Birth") || selectedEvent.equals("Start of Lactation") || selectedEvent.equals("Dry Off") || selectedEvent.equals("Artificial Insemination") || selectedEvent.equals("Bull Servicing")) {
             if(cowSexArray != null && cowSexArray[cowIdentifierS.getSelectedItemPosition()].equals(Cow.SEX_MALE)) {
                 Toast.makeText(this,Locale.getStringInLocale("event_only_for_female_cattle",this),Toast.LENGTH_LONG).show();
diff --git a/MistroFarmer/src/main/res/values/strings_en.xml b/MistroFarmer/src/main/res/values/strings_en.xml
index 1b27239..53401d7 100644
--- a/MistroFarmer/src/main/res/values/strings_en.xml
+++ b/MistroFarmer/src/main/res/values/strings_en.xml
@@ -173,6 +173,7 @@
     <string name="remarks_en">Remarks</string>
     <string name="event_en">Event</string>
     <string-array name="cow_event_types_en">
+        <item></item>
         <item>Birth</item>
         <item>Start of Lactation</item>
         <item>Dry Off</item>
@@ -283,4 +284,5 @@
     <string name="sire_owner_en">Sire\'s Owner</string>
     <string name="name_sire_owner_en">Name of Sire\'s Owner</string>
     <string name="preferred_language_en">Preferred language</string>
+    <string name="select_an_event_en">Please select an event</string>
 </resources>
diff --git a/MistroFarmer/src/main/res/values/strings_kl.xml b/MistroFarmer/src/main/res/values/strings_kl.xml
index 9bf5736..ba92c92 100644
--- a/MistroFarmer/src/main/res/values/strings_kl.xml
+++ b/MistroFarmer/src/main/res/values/strings_kl.xml
@@ -173,6 +173,7 @@
     <string name="remarks_kl">tesyi ki nekoaak ana nekoikeer</string>
     <string name="event_kl">yautiet</string>
     <string-array name="cow_event_types_kl">
+        <item></item>
         <item>siget</item>
         <item>taunet ab keiysyet</item>
         <item>kolug</item>
diff --git a/MistroFarmer/src/main/res/values/strings_kr.xml b/MistroFarmer/src/main/res/values/strings_kr.xml
index ff519d5..98f0e71 100644
--- a/MistroFarmer/src/main/res/values/strings_kr.xml
+++ b/MistroFarmer/src/main/res/values/strings_kr.xml
@@ -173,6 +173,7 @@
     <string name="remarks_kr">obuloli</string>
     <string name="event_kr">efikhole </string>
     <string-array name="cow_event_types_kr">
+        <item></item>
         <item>khwibulwa</item>
         <item>okhuchaka okhushela</item>
         <item>okhumila</item>
diff --git a/MistroFarmer/src/main/res/values/strings_lh.xml b/MistroFarmer/src/main/res/values/strings_lh.xml
index 2fb00b3..aba4491 100644
--- a/MistroFarmer/src/main/res/values/strings_lh.xml
+++ b/MistroFarmer/src/main/res/values/strings_lh.xml
@@ -173,6 +173,7 @@
     <string name="remarks_lh">akandi khwo</string>
     <string name="event_lh">shikhole</string>
     <string-array name="cow_event_types_lh">
+        <item></item>
         <item>khurula/khwibula</item>
         <item>khuchaka okhununia</item>
         <item>dry off</item>
diff --git a/MistroFarmer/src/main/res/values/strings_sw.xml b/MistroFarmer/src/main/res/values/strings_sw.xml
index 9647b4b..eda26a8 100644
--- a/MistroFarmer/src/main/res/values/strings_sw.xml
+++ b/MistroFarmer/src/main/res/values/strings_sw.xml
@@ -173,6 +173,7 @@
     <string name="remarks_sw">Maoni</string>
     <string name="event_sw">Tukio</string>
     <string-array name="cow_event_types_sw">
+        <item></item>
         <item>Kuzaliwa</item>
         <item>Kuanza kwa utoaji wa maziwa</item>
         <item>Dry Off</item>
-- 
2.7.1

