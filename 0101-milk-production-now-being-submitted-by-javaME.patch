From 7a1ce4b7d475bd67e1a68d434b6a765a290e4d7f Mon Sep 17 00:00:00 2001
From: Jason Rogena <jasonrogena@gmail.com>
Date: Thu, 31 Oct 2013 15:52:10 +0300
Subject: [PATCH 101/213] milk production now being submitted by javaME

---
 .../org/cgiar/ilri/mistro/farmer/carrier/Cow.java  |    9 +-
 .../mistro/farmer/ui/AddMilkProductionScreen.java  |  183 ++-
 .../mistro/farmer/ui/MilkProductionScreen.java     |   33 +-
 .../farmer/ui/localization/StringResources.java    |    4 +
 web/log/debug.log                                  | 1581 ++++++++++++++++++++
 web/log/error.log                                  |    2 +
 web/log/info.log                                   |  155 ++
 web/log/warning.log                                |    4 +
 web/php/farmer/add_milk_production.php             |   12 +-
 9 files changed, 1972 insertions(+), 11 deletions(-)

diff --git a/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/carrier/Cow.java b/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/carrier/Cow.java
index ff4ab7a..3a97adb 100644
--- a/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/carrier/Cow.java
+++ b/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/carrier/Cow.java
@@ -63,10 +63,11 @@ public class Cow {
     public Cow(JSONObject cowJSONObject){
         try {
             name = cowJSONObject.getString("name");
-            earTagNumber = cowJSONObject.getString("ear_tag_number");;
-            dateOfBirth = cowJSONObject.getString("date_of_birth");;
-            age = cowJSONObject.getInt("age");
-            ageType = cowJSONObject.getString("age_type");;
+            earTagNumber = cowJSONObject.getString("ear_tag_number");
+            dateOfBirth = cowJSONObject.getString("date_of_birth");
+            if(cowJSONObject.getString("age")!=null && cowJSONObject.getString("age").trim().length() > 0)
+                age = Integer.parseInt(cowJSONObject.getString("age"));
+            ageType = cowJSONObject.getString("age_type");
             breeds = new String[0];
             sex = cowJSONObject.getString("sex");
             deformities = new String[0];
diff --git a/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/AddMilkProductionScreen.java b/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/AddMilkProductionScreen.java
index d705a05..a51889a 100644
--- a/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/AddMilkProductionScreen.java
+++ b/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/AddMilkProductionScreen.java
@@ -3,6 +3,7 @@ package org.cgiar.ilri.mistro.farmer.ui;
 import com.sun.lwuit.ComboBox;
 import com.sun.lwuit.Command;
 import com.sun.lwuit.Component;
+import com.sun.lwuit.Dialog;
 import com.sun.lwuit.Form;
 import com.sun.lwuit.Label;
 import com.sun.lwuit.TextField;
@@ -10,6 +11,8 @@ import com.sun.lwuit.events.ActionEvent;
 import com.sun.lwuit.events.ActionListener;
 import com.sun.lwuit.layouts.BoxLayout;
 import com.sun.lwuit.spinner.Spinner;
+import java.util.Calendar;
+import java.util.Date;
 import java.util.Vector;
 import org.cgiar.ilri.mistro.farmer.Midlet;
 import org.cgiar.ilri.mistro.farmer.carrier.Cow;
@@ -17,6 +20,9 @@ import org.cgiar.ilri.mistro.farmer.carrier.Farmer;
 import org.cgiar.ilri.mistro.farmer.ui.localization.ArrayResources;
 import org.cgiar.ilri.mistro.farmer.ui.localization.Locale;
 import org.cgiar.ilri.mistro.farmer.ui.localization.StringResources;
+import org.cgiar.ilri.mistro.farmer.utils.DataHandler;
+import org.json.me.JSONException;
+import org.json.me.JSONObject;
 
 /**
  *
@@ -69,7 +75,34 @@ public class AddMilkProductionScreen extends Form implements Screen{
                     milkProductionScreen.start();
                 }
                 else if(evt.getCommand().equals(addCommand)){
-                    //TODO: send data to server
+                    if(validateInput()){
+                        JSONObject jsonObject  = new JSONObject();
+                        try {
+                            jsonObject.put("mobile_no",AddMilkProductionScreen.this.farmer.getMobileNumber());
+                            Cow selectedCow = (Cow) validCows.elementAt(cowCB.getSelectedIndex());
+                            jsonObject.put("cowName",selectedCow.getName());
+                            jsonObject.put("cowEarTagNumber",selectedCow.getEarTagNumber());
+
+                            String[] timesInEN = Locale.getStringArrayInLocale(Locale.LOCALE_EN, ArrayResources.milking_times);
+                            jsonObject.put("time",timesInEN[timeCB.getSelectedIndex()]);
+                            jsonObject.put("quantity",quantityTF.getText());
+
+                            String[] quantityTypesInEN = Locale.getStringArrayInLocale(Locale.LOCALE_EN, ArrayResources.quantity_types);
+                            jsonObject.put("quantityType",quantityTypesInEN[quantityTypeCB.getSelectedIndex()]);
+
+                            Date date = (Date) dateS.getValue();
+                            Calendar calendar = Calendar.getInstance();
+                            calendar.setTime(date);
+                            String dateString = String.valueOf(calendar.get(Calendar.DAY_OF_MONTH))+"/"+String.valueOf(calendar.get(Calendar.MONTH))+"/"+String.valueOf(calendar.get(Calendar.YEAR));
+                            jsonObject.put("date", dateString);
+                            
+                            Thread thread = new Thread(new MilkProductionHandler(jsonObject));
+                            thread.run();
+                        } 
+                        catch (JSONException ex) {
+                            ex.printStackTrace();
+                        }
+                    }
                 }
             }
         });
@@ -97,9 +130,9 @@ public class AddMilkProductionScreen extends Form implements Screen{
         setLabelStyle(timeL);
         this.addComponent(timeL);
         
-        timeCB = new ComboBox(Locale.getStringArrayInLocale(locale, ArrayResources.quantity_types));
+        timeCB = new ComboBox(Locale.getStringArrayInLocale(locale, ArrayResources.milking_times));
         setComponentStyle(timeCB, true);
-        timeCB.setRenderer(new MistroListCellRenderer(Locale.getStringArrayInLocale(locale, ArrayResources.quantity_types)));
+        timeCB.setRenderer(new MistroListCellRenderer(Locale.getStringArrayInLocale(locale, ArrayResources.milking_times)));
         this.addComponent(timeCB);
         
         quantityL = new Label(Locale.getStringInLocale(locale, StringResources.quantity));
@@ -155,9 +188,70 @@ public class AddMilkProductionScreen extends Form implements Screen{
         
         return cowNames;
     }
+    
+    private boolean validateInput(){
+        final Dialog infoDialog = new Dialog();
+        infoDialog.setDialogType(Dialog.TYPE_INFO);
+        final Command backCommand = new Command(Locale.getStringInLocale(locale, StringResources.back));
+        infoDialog.addCommand(backCommand);
+        infoDialog.addCommandListener(new ActionListener() {
+
+            public void actionPerformed(ActionEvent evt) {
+                if(evt.getCommand().equals(backCommand)){
+                    infoDialog.dispose();
+                }
+            }
+        });
+        
+        Label text = new Label();
+        text.getStyle().setAlignment(CENTER);
+        infoDialog.addComponent(text);
+        
+        if(quantityTF.getText()==null || quantityTF.getText().trim().length() == 0){
+            text.setText(Locale.getStringInLocale(locale, StringResources.enter_quantity_of_milk_produced));
+            quantityTF.requestFocus();
+            infoDialog.show(100, 100, 11, 11, true);
+            return false;
+        }
+        
+        if(validateDate()!=null){
+            text.setText(validateDate());
+            dateS.requestFocus();
+            infoDialog.show(100, 100, 11, 11, true);
+            return false;
+        }
+        
+        String[] quantityTypesInEN = Locale.getStringArrayInLocale(Locale.LOCALE_EN, ArrayResources.quantity_types);
+        String quantityType = quantityTypesInEN[quantityTypeCB.getSelectedIndex()];
+        if(quantityType.equals("Litres") || quantityType.equals("KGs")){
+            if(Integer.parseInt(quantityTF.getText()) > 50){
+                text.setText(Locale.getStringInLocale(locale, StringResources.milk_too_much));
+                quantityTF.requestFocus();
+                infoDialog.show(100, 100, 11, 11, true);
+                return false;
+            }
+        }
+        return true;
+    }
+    
+    private String validateDate(){
+        Date dateSelected  = (Date) dateS.getValue();
+        long currentTime = System.currentTimeMillis();
+        
+        long timeDiffDays = (currentTime - dateSelected.getTime())/86400000;
+        
+        if(timeDiffDays > 30){
+            return Locale.getStringInLocale(locale, StringResources.milk_data_too_old);
+        }
+        else if(timeDiffDays < 0){
+            return Locale.getStringInLocale(locale, StringResources.date_in_future);
+        }
+        
+        return null;
+    }
 
     public void start() {
-        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
+        this.show();
     }
 
     public void destroy() {
@@ -168,4 +262,85 @@ public class AddMilkProductionScreen extends Form implements Screen{
         throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
     }
     
+    private void actOnServerResponse(String response){
+        if(response == null){
+            final Dialog infoDialog = new Dialog(Locale.getStringInLocale(locale, StringResources.error));
+            infoDialog.setDialogType(Dialog.TYPE_ERROR);
+            final Command backCommand = new Command(Locale.getStringInLocale(locale, StringResources.back));
+            infoDialog.addCommand(backCommand);
+            infoDialog.addCommandListener(new ActionListener() {
+
+                public void actionPerformed(ActionEvent evt) {
+                    if(evt.getCommand().equals(backCommand)){
+                        infoDialog.dispose();
+                    }
+                }
+            });
+
+            Label text = new Label();
+            text.getStyle().setAlignment(CENTER);
+            infoDialog.addComponent(text);
+            text.setText(Locale.getStringInLocale(locale, StringResources.problem_connecting_to_server));
+            infoDialog.show(100, 100, 11, 11, true);
+        }
+        else if(response.equals(DataHandler.ACKNOWLEDGE_OK)){
+            final Dialog infoDialog = new Dialog(Locale.getStringInLocale(locale, StringResources.success));
+            infoDialog.setDialogType(Dialog.TYPE_INFO);
+            final Command backCommand = new Command(Locale.getStringInLocale(locale, StringResources.okay));
+            infoDialog.addCommand(new Command(""));//placibo command
+            infoDialog.addCommand(backCommand);
+            infoDialog.addCommandListener(new ActionListener() {
+
+                public void actionPerformed(ActionEvent evt) {
+                    if(evt.getCommand().equals(backCommand)){
+                        infoDialog.dispose();
+                        MilkProductionScreen milkProductionScreen = new MilkProductionScreen(midlet, locale, farmer);
+                        milkProductionScreen.start();
+                    }
+                }
+            });
+
+            Label text = new Label();
+            text.getStyle().setAlignment(CENTER);
+            infoDialog.addComponent(text);
+            text.setText(Locale.getStringInLocale(locale, StringResources.information_successfully_sent_to_server));
+            infoDialog.show(100, 100, 11, 11, true);
+        }
+        else if(response.equals(DataHandler.DATA_ERROR)){
+            final Dialog infoDialog = new Dialog(Locale.getStringInLocale(locale, StringResources.error));
+            infoDialog.setDialogType(Dialog.TYPE_ERROR);
+            final Command backCommand = new Command(Locale.getStringInLocale(locale, StringResources.back));
+            infoDialog.addCommand(backCommand);
+            infoDialog.addCommandListener(new ActionListener() {
+
+                public void actionPerformed(ActionEvent evt) {
+                    if(evt.getCommand().equals(backCommand)){
+                        infoDialog.dispose();
+                    }
+                }
+            });
+
+            Label text = new Label();
+            text.getStyle().setAlignment(CENTER);
+            infoDialog.addComponent(text);
+            text.setText(Locale.getStringInLocale(locale, StringResources.problem_in_data_sent_en));
+            infoDialog.show(100, 100, 11, 11, true);
+        }
+    }
+    
+    private class MilkProductionHandler implements Runnable{
+
+        private JSONObject jSONObject;
+        
+        public MilkProductionHandler(JSONObject jSONObject) {
+            this.jSONObject = jSONObject;
+        }
+        
+        
+        public void run() {
+            String response = DataHandler.sendDataToServer(jSONObject, DataHandler.FARMER_ADD_MILK_PRODUCTION_URL);
+            actOnServerResponse(response);
+        }
+        
+    }
 }
diff --git a/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/MilkProductionScreen.java b/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/MilkProductionScreen.java
index 9740f09..6d0426b 100644
--- a/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/MilkProductionScreen.java
+++ b/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/MilkProductionScreen.java
@@ -1,6 +1,8 @@
 package org.cgiar.ilri.mistro.farmer.ui;
 
+import com.sun.lwuit.Button;
 import com.sun.lwuit.Command;
+import com.sun.lwuit.Component;
 import com.sun.lwuit.Form;
 import com.sun.lwuit.events.ActionEvent;
 import com.sun.lwuit.events.ActionListener;
@@ -23,6 +25,9 @@ public class MilkProductionScreen extends Form implements Screen, ActionListener
     private BoxLayout parentBoxLayout;
     private Command backCommand;
     
+    private Button addMilkProductionB;
+    private Button pastMilkProdutionB;
+    
     public MilkProductionScreen(Midlet midlet, int locale, Farmer farmer) {
         super(Locale.getStringInLocale(locale, StringResources.milk_production));
         this.midlet = midlet;
@@ -44,6 +49,29 @@ public class MilkProductionScreen extends Form implements Screen, ActionListener
                 }
             }
         });
+        
+        parentBoxLayout = new BoxLayout(BoxLayout.Y_AXIS);
+        this.setLayout(parentBoxLayout);
+        
+        addMilkProductionB = new Button(Locale.getStringInLocale(locale, StringResources.add_production));
+        addMilkProductionB.getStyle().setMargin(100, 10, 0, 0);
+        addMilkProductionB.getSelectedStyle().setMargin(100, 10, 0, 0);
+        setButtonStyle(addMilkProductionB);
+        addMilkProductionB.addActionListener(this);
+        this.addComponent(addMilkProductionB);
+        
+        pastMilkProdutionB = new Button(Locale.getStringInLocale(locale, StringResources.production_history));
+        pastMilkProdutionB.getStyle().setMargin(10, 10, 0, 0);
+        pastMilkProdutionB.getSelectedStyle().setMargin(10, 10, 0, 0);
+        setButtonStyle(pastMilkProdutionB);
+        pastMilkProdutionB.addActionListener(this);
+        this.addComponent(pastMilkProdutionB);
+    }
+    
+    private void setButtonStyle(Button button){
+        button.getStyle().setAlignment(Component.CENTER);
+        button.getSelectedStyle().setAlignment(Component.CENTER);
+        button.getSelectedStyle().setBgColor(0x2ecc71);
     }
     
     public void start() {
@@ -59,7 +87,10 @@ public class MilkProductionScreen extends Form implements Screen, ActionListener
     }
 
     public void actionPerformed(ActionEvent evt) {
-        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
+        if(evt.getComponent().equals(addMilkProductionB)){
+            AddMilkProductionScreen addMilkProductionScreen = new AddMilkProductionScreen(midlet, locale, farmer);
+            addMilkProductionScreen.show();
+        }
     }
     
 }
diff --git a/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/localization/StringResources.java b/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/localization/StringResources.java
index e7af2d2..fbd3259 100644
--- a/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/localization/StringResources.java
+++ b/JavaME/MistroFarmer/MistroFarmer/src/org/cgiar/ilri/mistro/farmer/ui/localization/StringResources.java
@@ -427,4 +427,8 @@ public class StringResources {
         "Quantity Type",
         ""
     };
+    public static final String[] success = {
+        "Success",
+        ""
+    };
 }
diff --git a/web/log/debug.log b/web/log/debug.log
index 3de5230..99a9d9c 100755
--- a/web/log/debug.log
+++ b/web/log/debug.log
@@ -18416,3 +18416,1584 @@
 
 )
 
+[Thursday, 31st October 2013 12:21:37] [authentication.php] json_decode returned: Array
+(
+    [mobileNumber] => 525
+)
+
+[Thursday, 31st October 2013 12:21:37] [authentication.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 12:21:37] [authentication.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 12:21:37] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 12:21:37] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 12:21:37] [database.php] results gotten from 'SELECT * FROM farmer WHERE `mobile_no` = '525'' are Array
+(
+)
+
+[Thursday, 31st October 2013 12:21:54] [authentication.php] json_decode returned: Array
+(
+    [mobileNumber] => 0722838686
+)
+
+[Thursday, 31st October 2013 12:21:54] [authentication.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 12:21:54] [authentication.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 12:21:54] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 12:21:54] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 12:21:54] [database.php] results gotten from 'SELECT * FROM farmer WHERE `mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 16
+            [name] => Jason Rogena
+            [mobile_no] => 0722838686
+            [location_county] => 
+            [location_district] => 
+            [gps_longitude] => 
+            [gps_latitude] => 
+            [date_added] => 2013-09-16 12:01:26
+            [extension_personnel_id] => 5
+            [sim_card_sn] => 89254028071000359956
+        )
+
+)
+
+[Thursday, 31st October 2013 12:21:54] [database.php] results gotten from 'SELECT * FROM cow WHERE farmer_id = 16' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+            [farmer_id] => 16
+            [name] => Betty
+            [ear_tag_number] => nai-jas3
+            [date_of_birth] => 2013-03-16 00:00:00
+            [age] => 26
+            [age_type] => Weeks
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 23
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 14:33:26
+            [service_type] => AI
+            [country_id] => 60
+        )
+
+    [1] => Array
+        (
+            [id] => 25
+            [farmer_id] => 16
+            [name] => Calf3
+            [ear_tag_number] => nai-jas5
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 0
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 15:52:50
+            [service_type] => AI
+            [country_id] => 3
+        )
+
+    [2] => Array
+        (
+            [id] => 23
+            [farmer_id] => 16
+            [name] => Chris
+            [ear_tag_number] => nai-jas2
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 5
+            [age_type] => Weeks
+            [sex] => Male
+            [sire_id] => 
+            [dam_id] => 22
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [3] => Array
+        (
+            [id] => 22
+            [farmer_id] => 16
+            [name] => Rosy
+            [ear_tag_number] => nai-jas1
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 2
+            [age_type] => Years
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [4] => Array
+        (
+            [id] => 26
+            [farmer_id] => 16
+            [name] => Tesr
+            [ear_tag_number] => etd2
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 258
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 17:03:12
+            [service_type] => AI
+            [country_id] => 195
+        )
+
+)
+
+[Thursday, 31st October 2013 12:23:20] [authentication.php] json_decode returned: Array
+(
+    [mobileNumber] => 0722838686
+)
+
+[Thursday, 31st October 2013 12:23:20] [authentication.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 12:23:20] [authentication.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 12:23:20] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 12:23:20] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 12:23:20] [database.php] results gotten from 'SELECT * FROM farmer WHERE `mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 16
+            [name] => Jason Rogena
+            [mobile_no] => 0722838686
+            [location_county] => 
+            [location_district] => 
+            [gps_longitude] => 
+            [gps_latitude] => 
+            [date_added] => 2013-09-16 12:01:26
+            [extension_personnel_id] => 5
+            [sim_card_sn] => 89254028071000359956
+        )
+
+)
+
+[Thursday, 31st October 2013 12:23:20] [database.php] results gotten from 'SELECT * FROM cow WHERE farmer_id = 16' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+            [farmer_id] => 16
+            [name] => Betty
+            [ear_tag_number] => nai-jas3
+            [date_of_birth] => 2013-03-16 00:00:00
+            [age] => 26
+            [age_type] => Weeks
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 23
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 14:33:26
+            [service_type] => AI
+            [country_id] => 60
+        )
+
+    [1] => Array
+        (
+            [id] => 25
+            [farmer_id] => 16
+            [name] => Calf3
+            [ear_tag_number] => nai-jas5
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 0
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 15:52:50
+            [service_type] => AI
+            [country_id] => 3
+        )
+
+    [2] => Array
+        (
+            [id] => 23
+            [farmer_id] => 16
+            [name] => Chris
+            [ear_tag_number] => nai-jas2
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 5
+            [age_type] => Weeks
+            [sex] => Male
+            [sire_id] => 
+            [dam_id] => 22
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [3] => Array
+        (
+            [id] => 22
+            [farmer_id] => 16
+            [name] => Rosy
+            [ear_tag_number] => nai-jas1
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 2
+            [age_type] => Years
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [4] => Array
+        (
+            [id] => 26
+            [farmer_id] => 16
+            [name] => Tesr
+            [ear_tag_number] => etd2
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 258
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 17:03:12
+            [service_type] => AI
+            [country_id] => 195
+        )
+
+)
+
+[Thursday, 31st October 2013 12:32:35] [authentication.php] json_decode returned: Array
+(
+    [mobileNumber] => 0722838686
+)
+
+[Thursday, 31st October 2013 12:32:35] [authentication.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 12:32:35] [authentication.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 12:32:35] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 12:32:35] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 12:32:35] [database.php] results gotten from 'SELECT * FROM farmer WHERE `mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 16
+            [name] => Jason Rogena
+            [mobile_no] => 0722838686
+            [location_county] => 
+            [location_district] => 
+            [gps_longitude] => 
+            [gps_latitude] => 
+            [date_added] => 2013-09-16 12:01:26
+            [extension_personnel_id] => 5
+            [sim_card_sn] => 89254028071000359956
+        )
+
+)
+
+[Thursday, 31st October 2013 12:32:35] [database.php] results gotten from 'SELECT * FROM cow WHERE farmer_id = 16' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+            [farmer_id] => 16
+            [name] => Betty
+            [ear_tag_number] => nai-jas3
+            [date_of_birth] => 2013-03-16 00:00:00
+            [age] => 26
+            [age_type] => Weeks
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 23
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 14:33:26
+            [service_type] => AI
+            [country_id] => 60
+        )
+
+    [1] => Array
+        (
+            [id] => 25
+            [farmer_id] => 16
+            [name] => Calf3
+            [ear_tag_number] => nai-jas5
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 0
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 15:52:50
+            [service_type] => AI
+            [country_id] => 3
+        )
+
+    [2] => Array
+        (
+            [id] => 23
+            [farmer_id] => 16
+            [name] => Chris
+            [ear_tag_number] => nai-jas2
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 5
+            [age_type] => Weeks
+            [sex] => Male
+            [sire_id] => 
+            [dam_id] => 22
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [3] => Array
+        (
+            [id] => 22
+            [farmer_id] => 16
+            [name] => Rosy
+            [ear_tag_number] => nai-jas1
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 2
+            [age_type] => Years
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [4] => Array
+        (
+            [id] => 26
+            [farmer_id] => 16
+            [name] => Tesr
+            [ear_tag_number] => etd2
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 258
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 17:03:12
+            [service_type] => AI
+            [country_id] => 195
+        )
+
+)
+
+[Thursday, 31st October 2013 12:35:14] [authentication.php] json_decode returned: Array
+(
+    [mobileNumber] => 0722838686
+)
+
+[Thursday, 31st October 2013 12:35:14] [authentication.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 12:35:14] [authentication.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 12:35:14] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 12:35:14] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 12:35:14] [database.php] results gotten from 'SELECT * FROM farmer WHERE `mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 16
+            [name] => Jason Rogena
+            [mobile_no] => 0722838686
+            [location_county] => 
+            [location_district] => 
+            [gps_longitude] => 
+            [gps_latitude] => 
+            [date_added] => 2013-09-16 12:01:26
+            [extension_personnel_id] => 5
+            [sim_card_sn] => 89254028071000359956
+        )
+
+)
+
+[Thursday, 31st October 2013 12:35:14] [database.php] results gotten from 'SELECT * FROM cow WHERE farmer_id = 16' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+            [farmer_id] => 16
+            [name] => Betty
+            [ear_tag_number] => nai-jas3
+            [date_of_birth] => 2013-03-16 00:00:00
+            [age] => 26
+            [age_type] => Weeks
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 23
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 14:33:26
+            [service_type] => AI
+            [country_id] => 60
+        )
+
+    [1] => Array
+        (
+            [id] => 25
+            [farmer_id] => 16
+            [name] => Calf3
+            [ear_tag_number] => nai-jas5
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 0
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 15:52:50
+            [service_type] => AI
+            [country_id] => 3
+        )
+
+    [2] => Array
+        (
+            [id] => 23
+            [farmer_id] => 16
+            [name] => Chris
+            [ear_tag_number] => nai-jas2
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 5
+            [age_type] => Weeks
+            [sex] => Male
+            [sire_id] => 
+            [dam_id] => 22
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [3] => Array
+        (
+            [id] => 22
+            [farmer_id] => 16
+            [name] => Rosy
+            [ear_tag_number] => nai-jas1
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 2
+            [age_type] => Years
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [4] => Array
+        (
+            [id] => 26
+            [farmer_id] => 16
+            [name] => Tesr
+            [ear_tag_number] => etd2
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 258
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 17:03:12
+            [service_type] => AI
+            [country_id] => 195
+        )
+
+)
+
+[Thursday, 31st October 2013 15:10:55] [authentication.php] json_decode returned: Array
+(
+    [mobileNumber] => 0722838686
+)
+
+[Thursday, 31st October 2013 15:10:55] [authentication.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:10:55] [authentication.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:10:55] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:10:55] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:10:55] [database.php] results gotten from 'SELECT * FROM farmer WHERE `mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 16
+            [name] => Jason Rogena
+            [mobile_no] => 0722838686
+            [location_county] => 
+            [location_district] => 
+            [gps_longitude] => 
+            [gps_latitude] => 
+            [date_added] => 2013-09-16 12:01:26
+            [extension_personnel_id] => 5
+            [sim_card_sn] => 89254028071000359956
+        )
+
+)
+
+[Thursday, 31st October 2013 15:10:55] [database.php] results gotten from 'SELECT * FROM cow WHERE farmer_id = 16' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+            [farmer_id] => 16
+            [name] => Betty
+            [ear_tag_number] => nai-jas3
+            [date_of_birth] => 2013-03-16 00:00:00
+            [age] => 26
+            [age_type] => Weeks
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 23
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 14:33:26
+            [service_type] => AI
+            [country_id] => 60
+        )
+
+    [1] => Array
+        (
+            [id] => 25
+            [farmer_id] => 16
+            [name] => Calf3
+            [ear_tag_number] => nai-jas5
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 0
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 15:52:50
+            [service_type] => AI
+            [country_id] => 3
+        )
+
+    [2] => Array
+        (
+            [id] => 23
+            [farmer_id] => 16
+            [name] => Chris
+            [ear_tag_number] => nai-jas2
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 5
+            [age_type] => Weeks
+            [sex] => Male
+            [sire_id] => 
+            [dam_id] => 22
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [3] => Array
+        (
+            [id] => 22
+            [farmer_id] => 16
+            [name] => Rosy
+            [ear_tag_number] => nai-jas1
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 2
+            [age_type] => Years
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [4] => Array
+        (
+            [id] => 26
+            [farmer_id] => 16
+            [name] => Tesr
+            [ear_tag_number] => etd2
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 258
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 17:03:12
+            [service_type] => AI
+            [country_id] => 195
+        )
+
+)
+
+[Thursday, 31st October 2013 15:11:16] [add_milk_production.php] json_decode returned: Array
+(
+    [date] => 30/9/2013
+    [cowName] => Betty
+    [cowEarTagNumber] => nai-jas3
+    [quantity] => 20
+    [time] => Morning
+    [quantityType] => Litres
+    [mobile_no] => 0722838686
+)
+
+[Thursday, 31st October 2013 15:11:16] [add_milk_production.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:11:16] [add_milk_production.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:11:16] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:11:16] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:11:16] [database.php] results gotten from 'SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas3' AND cow.`name` = 'Betty' AND farmer.`mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+        )
+
+)
+
+[Thursday, 31st October 2013 15:11:16] [add_milk_production.php] cow.id fetched and is 24
+[Thursday, 31st October 2013 15:11:16] [database.php] results gotten from 'SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')' are Array
+(
+)
+
+[Thursday, 31st October 2013 15:11:16] [add_milk_production.php] returning time '2013-10-31 15:11:16' using format 'Y-m-d H:i:s'
+[Thursday, 31st October 2013 15:11:32] [add_milk_production.php] json_decode returned: Array
+(
+    [date] => 30/9/2013
+    [cowName] => Betty
+    [cowEarTagNumber] => nai-jas3
+    [quantity] => 20
+    [time] => Morning
+    [quantityType] => Litres
+    [mobile_no] => 0722838686
+)
+
+[Thursday, 31st October 2013 15:11:32] [add_milk_production.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:11:32] [add_milk_production.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:11:32] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:11:32] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:11:32] [database.php] results gotten from 'SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas3' AND cow.`name` = 'Betty' AND farmer.`mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+        )
+
+)
+
+[Thursday, 31st October 2013 15:11:32] [add_milk_production.php] cow.id fetched and is 24
+[Thursday, 31st October 2013 15:11:32] [database.php] results gotten from 'SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')' are Array
+(
+    [0] => Array
+        (
+            [time] => Morning
+        )
+
+)
+
+[Thursday, 31st October 2013 15:11:32] [add_milk_production.php] returning time '2013-10-31 15:11:32' using format 'Y-m-d H:i:s'
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] json_decode returned: Array
+(
+    [date] => 30/9/2013
+    [cowName] => Betty
+    [cowEarTagNumber] => nai-jas3
+    [quantity] => 20
+    [time] => Afternoon
+    [quantityType] => Litres
+    [mobile_no] => 0722838686
+)
+
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:12:35] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:12:35] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:12:35] [database.php] results gotten from 'SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas3' AND cow.`name` = 'Betty' AND farmer.`mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+        )
+
+)
+
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] cow.id fetched and is 24
+[Thursday, 31st October 2013 15:12:35] [database.php] results gotten from 'SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')' are Array
+(
+    [0] => Array
+        (
+            [time] => Morning
+        )
+
+)
+
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] returning time '2013-10-31 15:12:35' using format 'Y-m-d H:i:s'
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] json_decode returned: Array
+(
+    [date] => 30/9/2013
+    [cowName] => Betty
+    [cowEarTagNumber] => nai-jas3
+    [quantity] => 20
+    [time] => Evening
+    [quantityType] => Litres
+    [mobile_no] => 0722838686
+)
+
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:13:10] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:13:10] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:13:10] [database.php] results gotten from 'SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas3' AND cow.`name` = 'Betty' AND farmer.`mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+        )
+
+)
+
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] cow.id fetched and is 24
+[Thursday, 31st October 2013 15:13:10] [database.php] results gotten from 'SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')' are Array
+(
+    [0] => Array
+        (
+            [time] => Morning
+        )
+
+    [1] => Array
+        (
+            [time] => Afternoon
+        )
+
+)
+
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] returning time '2013-10-31 15:13:10' using format 'Y-m-d H:i:s'
+[Thursday, 31st October 2013 15:13:52] [add_milk_production.php] json_decode returned: Array
+(
+    [date] => 30/9/2013
+    [cowName] => Betty
+    [cowEarTagNumber] => nai-jas3
+    [quantity] => 20
+    [time] => Combined
+    [quantityType] => Litres
+    [mobile_no] => 0722838686
+)
+
+[Thursday, 31st October 2013 15:13:52] [add_milk_production.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:13:52] [add_milk_production.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:13:52] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:13:52] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:13:52] [database.php] results gotten from 'SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas3' AND cow.`name` = 'Betty' AND farmer.`mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+        )
+
+)
+
+[Thursday, 31st October 2013 15:13:52] [add_milk_production.php] cow.id fetched and is 24
+[Thursday, 31st October 2013 15:13:52] [database.php] results gotten from 'SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')' are Array
+(
+    [0] => Array
+        (
+            [time] => Morning
+        )
+
+    [1] => Array
+        (
+            [time] => Afternoon
+        )
+
+    [2] => Array
+        (
+            [time] => Evening
+        )
+
+)
+
+[Thursday, 31st October 2013 15:49:47] [authentication.php] json_decode returned: Array
+(
+    [mobileNumber] => 0722838686
+)
+
+[Thursday, 31st October 2013 15:49:47] [authentication.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:49:47] [authentication.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:49:47] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:49:47] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:49:47] [database.php] results gotten from 'SELECT * FROM farmer WHERE `mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 16
+            [name] => Jason Rogena
+            [mobile_no] => 0722838686
+            [location_county] => 
+            [location_district] => 
+            [gps_longitude] => 
+            [gps_latitude] => 
+            [date_added] => 2013-09-16 12:01:26
+            [extension_personnel_id] => 5
+            [sim_card_sn] => 89254028071000359956
+        )
+
+)
+
+[Thursday, 31st October 2013 15:49:47] [database.php] results gotten from 'SELECT * FROM cow WHERE farmer_id = 16' are Array
+(
+    [0] => Array
+        (
+            [id] => 24
+            [farmer_id] => 16
+            [name] => Betty
+            [ear_tag_number] => nai-jas3
+            [date_of_birth] => 2013-03-16 00:00:00
+            [age] => 26
+            [age_type] => Weeks
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 23
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 14:33:26
+            [service_type] => AI
+            [country_id] => 60
+        )
+
+    [1] => Array
+        (
+            [id] => 25
+            [farmer_id] => 16
+            [name] => Calf3
+            [ear_tag_number] => nai-jas5
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 0
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 15:52:50
+            [service_type] => AI
+            [country_id] => 3
+        )
+
+    [2] => Array
+        (
+            [id] => 23
+            [farmer_id] => 16
+            [name] => Chris
+            [ear_tag_number] => nai-jas2
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 5
+            [age_type] => Weeks
+            [sex] => Male
+            [sire_id] => 
+            [dam_id] => 22
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [3] => Array
+        (
+            [id] => 22
+            [farmer_id] => 16
+            [name] => Rosy
+            [ear_tag_number] => nai-jas1
+            [date_of_birth] => 0000-00-00 00:00:00
+            [age] => 2
+            [age_type] => Years
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 12:01:26
+            [service_type] => Bull
+            [country_id] => 1
+        )
+
+    [4] => Array
+        (
+            [id] => 26
+            [farmer_id] => 16
+            [name] => Tesr
+            [ear_tag_number] => etd2
+            [date_of_birth] => 2013-09-16 00:00:00
+            [age] => 258
+            [age_type] => Days
+            [sex] => Female
+            [sire_id] => 
+            [dam_id] => 24
+            [straw_id] => 
+            [embryo_id] => 
+            [date_added] => 2013-09-16 17:03:12
+            [service_type] => AI
+            [country_id] => 195
+        )
+
+)
+
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] json_decode returned: Array
+(
+    [date] => 30/9/2013
+    [cowName] => Rosy
+    [cowEarTagNumber] => nai-jas1
+    [quantity] => 10
+    [time] => Morning
+    [quantityType] => Litres
+    [mobile_no] => 0722838686
+)
+
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:50:33] [database.php] settings obtained: Array
+(
+    [db_name] => ilri_mistro
+    [mysql_creds] => Array
+        (
+            [username] => root
+            [password] => jason
+            [host] => localhost
+        )
+
+    [log_settings] => logs.ini
+    [response_codes] => response_codes.ini
+    [time_zone] => EAT
+)
+
+[Thursday, 31st October 2013 15:50:33] [database.php] response codes are: Array
+(
+    [db_error] => 32243
+    [user_not_authenticated] => 43322
+    [sim_card_registered] => 83242
+    [acknowledge_ok] => 533783
+    [data_error] => 934342
+    [no_data] => 77732
+)
+
+[Thursday, 31st October 2013 15:50:33] [database.php] results gotten from 'SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas1' AND cow.`name` = 'Rosy' AND farmer.`mobile_no` = '0722838686'' are Array
+(
+    [0] => Array
+        (
+            [id] => 22
+        )
+
+)
+
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] cow.id fetched and is 22
+[Thursday, 31st October 2013 15:50:33] [database.php] results gotten from 'SELECT `time` FROM `milk_production` WHERE `cow_id` = 22 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')' are Array
+(
+)
+
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] returning time '2013-10-31 15:50:33' using format 'Y-m-d H:i:s'
diff --git a/web/log/error.log b/web/log/error.log
index d2f9652..530fcb7 100755
--- a/web/log/error.log
+++ b/web/log/error.log
@@ -6,3 +6,5 @@
 [Wednesday, 23rd October 2013 17:10:00] [database.php] MySQL error 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1' thrown while trying to run query 'INSERT INTO `cow_event`(`cow_id`,`event_id`,`remarks`,`event_date`,`date_added`,`servicing_days`) VALUES(22,11,'',STR_TO_DATE('23/10/2013', '%d/%m/%Y'),'2013-10-23 17:10:00',)', exiting
 [Wednesday, 30th October 2013 16:34:30] [database.php] MySQL error 'Duplicate entry '0712558800-' for key 'mobile_no'' thrown while trying to run query 'INSERT INTO `farmer`(name,`mobile_no`,`gps_longitude`,`gps_latitude`,`extension_personnel_id`,`sim_card_sn`,`date_added`) VALUES('Test2','0712558800','','',9,'','2013-10-30 16:34:29')', exiting
 [Wednesday, 30th October 2013 16:34:41] [database.php] MySQL error 'Duplicate entry '0712558800-' for key 'mobile_no'' thrown while trying to run query 'INSERT INTO `farmer`(name,`mobile_no`,`gps_longitude`,`gps_latitude`,`extension_personnel_id`,`sim_card_sn`,`date_added`) VALUES('Test2','0712558800','','',9,'','2013-10-30 16:34:40')', exiting
+[Thursday, 31st October 2013 15:11:32] [database.php] MySQL error 'Duplicate entry '24-Morning-2013-09-30' for key 'cow_id_2'' thrown while trying to run query 'INSERT INTO `milk_production`(`cow_id`,`time`,`quantity`, `quantity_type`,`date`,`date_added`) VALUES(24,'Morning',20,'Litres',STR_TO_DATE('30/9/2013', '%d/%m/%Y'),'2013-10-31 15:11:32')', exiting
+[Thursday, 31st October 2013 15:13:52] [add_milk_production.php] a record already exists in the database with combined data for the date or the user is trying to enter combilned data when there is data record for this date, exiting
diff --git a/web/log/info.log b/web/log/info.log
index 1449786..f5450d2 100755
--- a/web/log/info.log
+++ b/web/log/info.log
@@ -2547,3 +2547,158 @@
 [Thursday, 31st October 2013 12:09:58] [authentication.php] the mobile number being used (0722838686) is authenticated for 'Jason Rogena'. Sending farmer's name back to client
 [Thursday, 31st October 2013 12:09:58] [database.php] running query SELECT * FROM cow WHERE farmer_id = 16
 [Thursday, 31st October 2013 12:09:58] [authentication.php] gracefully exiting
+[Thursday, 31st October 2013 12:21:37] [authentication.php] Starting Authenticator
+[Thursday, 31st October 2013 12:21:37] [authentication.php] obtaining POST request
+[Thursday, 31st October 2013 12:21:37] [authentication.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 12:21:37] [authentication.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 12:21:37] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 12:21:37] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 12:21:37] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 12:21:37] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 12:21:37] [database.php] running query SELECT * FROM farmer WHERE `mobile_no` = '525'
+[Thursday, 31st October 2013 12:21:37] [authentication.php] gracefully exiting
+[Thursday, 31st October 2013 12:21:54] [authentication.php] Starting Authenticator
+[Thursday, 31st October 2013 12:21:54] [authentication.php] obtaining POST request
+[Thursday, 31st October 2013 12:21:54] [authentication.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 12:21:54] [authentication.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 12:21:54] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 12:21:54] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 12:21:54] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 12:21:54] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 12:21:54] [database.php] running query SELECT * FROM farmer WHERE `mobile_no` = '0722838686'
+[Thursday, 31st October 2013 12:21:54] [authentication.php] the mobile number being used (0722838686) is authenticated for 'Jason Rogena'. Sending farmer's name back to client
+[Thursday, 31st October 2013 12:21:54] [database.php] running query SELECT * FROM cow WHERE farmer_id = 16
+[Thursday, 31st October 2013 12:21:54] [authentication.php] gracefully exiting
+[Thursday, 31st October 2013 12:23:20] [authentication.php] Starting Authenticator
+[Thursday, 31st October 2013 12:23:20] [authentication.php] obtaining POST request
+[Thursday, 31st October 2013 12:23:20] [authentication.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 12:23:20] [authentication.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 12:23:20] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 12:23:20] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 12:23:20] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 12:23:20] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 12:23:20] [database.php] running query SELECT * FROM farmer WHERE `mobile_no` = '0722838686'
+[Thursday, 31st October 2013 12:23:20] [authentication.php] the mobile number being used (0722838686) is authenticated for 'Jason Rogena'. Sending farmer's name back to client
+[Thursday, 31st October 2013 12:23:20] [database.php] running query SELECT * FROM cow WHERE farmer_id = 16
+[Thursday, 31st October 2013 12:23:20] [authentication.php] gracefully exiting
+[Thursday, 31st October 2013 12:32:35] [authentication.php] Starting Authenticator
+[Thursday, 31st October 2013 12:32:35] [authentication.php] obtaining POST request
+[Thursday, 31st October 2013 12:32:35] [authentication.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 12:32:35] [authentication.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 12:32:35] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 12:32:35] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 12:32:35] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 12:32:35] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 12:32:35] [database.php] running query SELECT * FROM farmer WHERE `mobile_no` = '0722838686'
+[Thursday, 31st October 2013 12:32:35] [authentication.php] the mobile number being used (0722838686) is authenticated for 'Jason Rogena'. Sending farmer's name back to client
+[Thursday, 31st October 2013 12:32:35] [database.php] running query SELECT * FROM cow WHERE farmer_id = 16
+[Thursday, 31st October 2013 12:32:35] [authentication.php] gracefully exiting
+[Thursday, 31st October 2013 12:35:14] [authentication.php] Starting Authenticator
+[Thursday, 31st October 2013 12:35:14] [authentication.php] obtaining POST request
+[Thursday, 31st October 2013 12:35:14] [authentication.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 12:35:14] [authentication.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 12:35:14] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 12:35:14] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 12:35:14] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 12:35:14] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 12:35:14] [database.php] running query SELECT * FROM farmer WHERE `mobile_no` = '0722838686'
+[Thursday, 31st October 2013 12:35:14] [authentication.php] the mobile number being used (0722838686) is authenticated for 'Jason Rogena'. Sending farmer's name back to client
+[Thursday, 31st October 2013 12:35:14] [database.php] running query SELECT * FROM cow WHERE farmer_id = 16
+[Thursday, 31st October 2013 12:35:14] [authentication.php] gracefully exiting
+[Thursday, 31st October 2013 15:10:55] [authentication.php] Starting Authenticator
+[Thursday, 31st October 2013 15:10:55] [authentication.php] obtaining POST request
+[Thursday, 31st October 2013 15:10:55] [authentication.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:10:55] [authentication.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:10:55] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 15:10:55] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:10:55] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:10:55] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 15:10:55] [database.php] running query SELECT * FROM farmer WHERE `mobile_no` = '0722838686'
+[Thursday, 31st October 2013 15:10:55] [authentication.php] the mobile number being used (0722838686) is authenticated for 'Jason Rogena'. Sending farmer's name back to client
+[Thursday, 31st October 2013 15:10:55] [database.php] running query SELECT * FROM cow WHERE farmer_id = 16
+[Thursday, 31st October 2013 15:10:55] [authentication.php] gracefully exiting
+[Thursday, 31st October 2013 15:11:16] [add_milk_production.php] Starting MilkProductionAdder
+[Thursday, 31st October 2013 15:11:16] [add_milk_production.php] obtaining POST request
+[Thursday, 31st October 2013 15:11:16] [add_milk_production.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:11:16] [add_milk_production.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:11:16] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 15:11:16] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:11:16] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:11:16] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 15:11:16] [database.php] running query SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas3' AND cow.`name` = 'Betty' AND farmer.`mobile_no` = '0722838686'
+[Thursday, 31st October 2013 15:11:16] [database.php] running query SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')
+[Thursday, 31st October 2013 15:11:16] [database.php] running query INSERT INTO `milk_production`(`cow_id`,`time`,`quantity`, `quantity_type`,`date`,`date_added`) VALUES(24,'Morning',20,'Litres',STR_TO_DATE('30/9/2013', '%d/%m/%Y'),'2013-10-31 15:11:16')
+[Thursday, 31st October 2013 15:11:17] [add_milk_production.php] returning response code 533783
+[Thursday, 31st October 2013 15:11:17] [add_milk_production.php] gracefully exiting
+[Thursday, 31st October 2013 15:11:32] [add_milk_production.php] Starting MilkProductionAdder
+[Thursday, 31st October 2013 15:11:32] [add_milk_production.php] obtaining POST request
+[Thursday, 31st October 2013 15:11:32] [add_milk_production.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:11:32] [add_milk_production.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:11:32] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 15:11:32] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:11:32] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:11:32] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 15:11:32] [database.php] running query SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas3' AND cow.`name` = 'Betty' AND farmer.`mobile_no` = '0722838686'
+[Thursday, 31st October 2013 15:11:32] [database.php] running query SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')
+[Thursday, 31st October 2013 15:11:32] [database.php] running query INSERT INTO `milk_production`(`cow_id`,`time`,`quantity`, `quantity_type`,`date`,`date_added`) VALUES(24,'Morning',20,'Litres',STR_TO_DATE('30/9/2013', '%d/%m/%Y'),'2013-10-31 15:11:32')
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] Starting MilkProductionAdder
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] obtaining POST request
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:12:35] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 15:12:35] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:12:35] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:12:35] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 15:12:35] [database.php] running query SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas3' AND cow.`name` = 'Betty' AND farmer.`mobile_no` = '0722838686'
+[Thursday, 31st October 2013 15:12:35] [database.php] running query SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')
+[Thursday, 31st October 2013 15:12:35] [database.php] running query INSERT INTO `milk_production`(`cow_id`,`time`,`quantity`, `quantity_type`,`date`,`date_added`) VALUES(24,'Afternoon',20,'Litres',STR_TO_DATE('30/9/2013', '%d/%m/%Y'),'2013-10-31 15:12:35')
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] returning response code 533783
+[Thursday, 31st October 2013 15:12:35] [add_milk_production.php] gracefully exiting
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] Starting MilkProductionAdder
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] obtaining POST request
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:13:10] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 15:13:10] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:13:10] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:13:10] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 15:13:10] [database.php] running query SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas3' AND cow.`name` = 'Betty' AND farmer.`mobile_no` = '0722838686'
+[Thursday, 31st October 2013 15:13:10] [database.php] running query SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')
+[Thursday, 31st October 2013 15:13:10] [database.php] running query INSERT INTO `milk_production`(`cow_id`,`time`,`quantity`, `quantity_type`,`date`,`date_added`) VALUES(24,'Evening',20,'Litres',STR_TO_DATE('30/9/2013', '%d/%m/%Y'),'2013-10-31 15:13:10')
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] returning response code 533783
+[Thursday, 31st October 2013 15:13:10] [add_milk_production.php] gracefully exiting
+[Thursday, 31st October 2013 15:13:52] [add_milk_production.php] Starting MilkProductionAdder
+[Thursday, 31st October 2013 15:13:52] [add_milk_production.php] obtaining POST request
+[Thursday, 31st October 2013 15:13:52] [add_milk_production.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:13:52] [add_milk_production.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:13:52] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 15:13:52] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:13:52] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:13:52] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 15:13:52] [database.php] running query SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas3' AND cow.`name` = 'Betty' AND farmer.`mobile_no` = '0722838686'
+[Thursday, 31st October 2013 15:13:52] [database.php] running query SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')
+[Thursday, 31st October 2013 15:49:47] [authentication.php] Starting Authenticator
+[Thursday, 31st October 2013 15:49:47] [authentication.php] obtaining POST request
+[Thursday, 31st October 2013 15:49:47] [authentication.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:49:47] [authentication.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:49:47] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 15:49:47] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:49:47] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:49:47] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 15:49:47] [database.php] running query SELECT * FROM farmer WHERE `mobile_no` = '0722838686'
+[Thursday, 31st October 2013 15:49:47] [authentication.php] the mobile number being used (0722838686) is authenticated for 'Jason Rogena'. Sending farmer's name back to client
+[Thursday, 31st October 2013 15:49:47] [database.php] running query SELECT * FROM cow WHERE farmer_id = 16
+[Thursday, 31st October 2013 15:49:47] [authentication.php] gracefully exiting
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] Starting MilkProductionAdder
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] obtaining POST request
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:50:33] [database.php] Starting DatabaseHandler
+[Thursday, 31st October 2013 15:50:33] [database.php] getting settings from: ../../config/settings.ini
+[Thursday, 31st October 2013 15:50:33] [database.php] getting response codes from: ../../config/response_codes.ini
+[Thursday, 31st October 2013 15:50:33] [database.php] connecting to ilri_mistro on localhost using root as the username
+[Thursday, 31st October 2013 15:50:33] [database.php] running query SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = 'nai-jas1' AND cow.`name` = 'Rosy' AND farmer.`mobile_no` = '0722838686'
+[Thursday, 31st October 2013 15:50:33] [database.php] running query SELECT `time` FROM `milk_production` WHERE `cow_id` = 22 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')
+[Thursday, 31st October 2013 15:50:33] [database.php] running query INSERT INTO `milk_production`(`cow_id`,`time`,`quantity`, `quantity_type`,`date`,`date_added`) VALUES(22,'Morning',10,'Litres',STR_TO_DATE('30/9/2013', '%d/%m/%Y'),'2013-10-31 15:50:33')
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] returning response code 533783
+[Thursday, 31st October 2013 15:50:33] [add_milk_production.php] gracefully exiting
diff --git a/web/log/warning.log b/web/log/warning.log
index 195435e..66f492a 100755
--- a/web/log/warning.log
+++ b/web/log/warning.log
@@ -111,3 +111,7 @@
 [Thursday, 31st October 2013 10:42:23] [authentication.php] SIM card serial number () not matching any farmer. Sending user_not_authenticated response code back to client
 [Thursday, 31st October 2013 10:58:11] [database.php] no results gotten for  'SELECT * FROM `farmer` INNER JOIN `cow` ON `farmer`.id = `cow`.`farmer_id` WHERE farmer.`mobile_no` = '22222''
 [Thursday, 31st October 2013 10:58:11] [authentication.php] The mobile number (22222) not matching any farmer. Sending user_not_authenticated response code back to client
+[Thursday, 31st October 2013 12:21:37] [database.php] no results gotten for  'SELECT * FROM farmer WHERE `mobile_no` = '525''
+[Thursday, 31st October 2013 12:21:37] [authentication.php] The mobile number (525) not matching any farmer. Sending user_not_authenticated response code back to client
+[Thursday, 31st October 2013 15:11:16] [database.php] no results gotten for  'SELECT `time` FROM `milk_production` WHERE `cow_id` = 24 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')'
+[Thursday, 31st October 2013 15:50:33] [database.php] no results gotten for  'SELECT `time` FROM `milk_production` WHERE `cow_id` = 22 AND `date` = STR_TO_DATE('30/9/2013', '%d/%m/%Y')'
diff --git a/web/php/farmer/add_milk_production.php b/web/php/farmer/add_milk_production.php
index 3150d7b..93b2812 100755
--- a/web/php/farmer/add_milk_production.php
+++ b/web/php/farmer/add_milk_production.php
@@ -23,9 +23,17 @@ class MilkProductionAdder {
 		$this->database = new DatabaseHandler;
 		
 		//get cow ID
-		$earTagNumber = $this->jsonObject['cowEarTagNumber'];
 		$cowName = $this->jsonObject['cowName'];
-		$query = "SELECT `id` FROM `cow` WHERE `ear_tag_number` = '{$earTagNumber}' AND `name` = '{$cowName}'";
+                $earTagNumber = $this->jsonObject['cowEarTagNumber'];
+                if(isset($this->jsonObject['simCardSN'])){
+                    $simCardSN = $this->jsonObject['simCardSN'];
+                    $query = "SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = '{$earTagNumber}' AND cow.`name` = '{$cowName}' AND farmer.`sim_card_sn` = '{$simCardSN}'";
+                }
+                else if(isset ($this->jsonObject['mobile_no'])){
+                    $mobileNumber = $this->jsonObject['mobile_no'];
+                    $query = "SELECT cow.`id` FROM farmer INNER JOIN `cow` ON farmer.id = cow.`farmer_id` WHERE cow.`ear_tag_number` = '{$earTagNumber}' AND cow.`name` = '{$cowName}' AND farmer.`mobile_no` = '{$mobileNumber}'";
+                }
+		
 		$result = $this->database->runMySQLQuery($query, true);
 		if(sizeOf($result) == 1) { //only one cow ID should have been fetched
 			$cowID = $result[0]['id'];
-- 
2.7.1

