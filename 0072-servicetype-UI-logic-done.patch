From 8b48d67685f65214abc9bfa9b89c201003ce74ca Mon Sep 17 00:00:00 2001
From: Jason Rogena <jasonrogena@gmail.com>
Date: Sat, 14 Sep 2013 14:03:09 +0300
Subject: [PATCH 072/213] servicetype UI logic done

---
 .../mistro/farmer/CowRegistrationActivity.java     | 48 +++++++++++++++++++++-
 1 file changed, 47 insertions(+), 1 deletion(-)

diff --git a/MistroFarmer/src/main/java/org/cgiar/ilri/mistro/farmer/CowRegistrationActivity.java b/MistroFarmer/src/main/java/org/cgiar/ilri/mistro/farmer/CowRegistrationActivity.java
index df5dd93..cbdf5b1 100644
--- a/MistroFarmer/src/main/java/org/cgiar/ilri/mistro/farmer/CowRegistrationActivity.java
+++ b/MistroFarmer/src/main/java/org/cgiar/ilri/mistro/farmer/CowRegistrationActivity.java
@@ -31,7 +31,7 @@ import java.util.Calendar;
 import java.util.Date;
 import java.util.GregorianCalendar;
 
-public class CowRegistrationActivity extends SherlockActivity implements View.OnClickListener, DatePickerDialog.OnDateSetListener,ListView.OnItemClickListener
+public class CowRegistrationActivity extends SherlockActivity implements View.OnClickListener, DatePickerDialog.OnDateSetListener, ListView.OnItemClickListener,  Spinner.OnItemSelectedListener
 {
     public static final String TAG="CowRegistrationActivity";
     public static final String KEY_INDEX="index";
@@ -119,6 +119,7 @@ public class CowRegistrationActivity extends SherlockActivity implements View.On
         deformityET.setOnClickListener(this);
         serviceTypeTV = (TextView)this.findViewById(R.id.service_type_tv);
         serviceTypeS = (Spinner)this.findViewById(R.id.service_type_s);
+        serviceTypeS.setOnItemSelectedListener(this);
         sireTV = (TextView)this.findViewById(R.id.sire_tv);
         sireS = (Spinner)this.findViewById(R.id.sire_s);
         strawNumberTV = (TextView)this.findViewById(R.id.straw_number_tv);
@@ -452,4 +453,49 @@ public class CowRegistrationActivity extends SherlockActivity implements View.On
         }
         deformityDialog.show();
     }
+
+    @Override
+    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
+        if(parent == serviceTypeS) {
+            changeServiceType();
+        }
+    }
+
+    private void changeServiceType() {
+        String[] serviceTypesInEN = Locale.getArrayInLocale("service_types", this, Locale.LOCALE_ENGLISH);
+        if(serviceTypesInEN[serviceTypeS.getSelectedItemPosition()].equals("Bull")) {
+            sireTV.setVisibility(TextView.VISIBLE);
+            sireS.setVisibility(Spinner.VISIBLE);
+            strawNumberTV.setVisibility(TextView.GONE);
+            strawNumberET.setVisibility(EditText.GONE);
+            damTV.setVisibility(TextView.VISIBLE);
+            damS.setVisibility(Spinner.VISIBLE);
+            embryoNumberTV.setVisibility(TextView.GONE);
+            embryoNumberET.setVisibility(EditText.GONE);
+        }
+        else if(serviceTypesInEN[serviceTypeS.getSelectedItemPosition()].equals("Artificial Insemination")) {
+            sireTV.setVisibility(TextView.GONE);
+            sireS.setVisibility(Spinner.GONE);
+            strawNumberTV.setVisibility(TextView.VISIBLE);
+            strawNumberET.setVisibility(EditText.VISIBLE);
+            damTV.setVisibility(TextView.VISIBLE);
+            damS.setVisibility(Spinner.VISIBLE);
+            embryoNumberTV.setVisibility(TextView.GONE);
+            embryoNumberET.setVisibility(EditText.GONE);
+        }
+        else if(serviceTypesInEN[serviceTypeS.getSelectedItemPosition()].equals("Embryo Transfer")) {
+            sireTV.setVisibility(TextView.GONE);
+            sireS.setVisibility(Spinner.GONE);
+            strawNumberTV.setVisibility(TextView.GONE);
+            strawNumberET.setVisibility(EditText.GONE);
+            damTV.setVisibility(TextView.GONE);
+            damS.setVisibility(Spinner.GONE);
+            embryoNumberTV.setVisibility(TextView.VISIBLE);
+            embryoNumberET.setVisibility(EditText.VISIBLE);
+        }
+    }
+
+    @Override
+    public void onNothingSelected(AdapterView<?> parent) {
+    }
 }
-- 
2.7.1

